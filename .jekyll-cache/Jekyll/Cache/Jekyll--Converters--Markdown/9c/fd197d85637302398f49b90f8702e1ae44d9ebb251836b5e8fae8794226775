I"Í><p>Stringåœ¨Javaä¸­çš„ä½¿ç”¨æ˜¯å¾ˆå¹¿æ³›çš„ï¼Œçœ‹ä¼¼å¹³å¹³æ— å¥‡ï¼Œä½†æ˜¯äº†è§£èµ·æ¥å´å‘ç°åŸæ¥è¶…çº§æœ‰å†…æ¶µçš„ï¼Œä»¥ä¸‹æ˜¯æœ¬å…”çš„ä¸€äº›æ€»ç»“ï¼Œä»æºç åˆ°å­—èŠ‚ç çœ‹çœ‹Stringçš„ç¥å¥‡ä¹‹å¤„ã€‚</p>

<!--more-->

<h3 id="1-stringçš„æœ¬è´¨">1. Stringçš„æœ¬è´¨</h3>

<h4 id="stringæºç ">Stringæºç ï¼š</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">String</span>
    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;,</span> <span class="nc">CharSequence</span> <span class="o">{</span>
  
    <span class="nd">@Stable</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">value</span><span class="o">;</span>
   	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">byte</span> <span class="n">coder</span><span class="o">;</span>
</code></pre></div></div>

<ul>
  <li>Stringå£°æ˜ä¸ºfinalï¼Œä¸å¯è¢«ç»§æ‰¿</li>
  <li>å®ç°äº†<code class="language-plaintext highlighter-rouge">Serializable</code>ï¼Œå¯åºåˆ—åŒ–ï¼Œå®ç°äº†<code class="language-plaintext highlighter-rouge">Comparable</code>æ¥å£ï¼ŒStringå¯ä»¥æ¯”è¾ƒå¤§å°</li>
  <li>Stringåœ¨jdk9ä¹‹å‰å†…éƒ¨å®šä¹‰äº†<code class="language-plaintext highlighter-rouge">final char  value[]</code>ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œjdk9åŠä¹‹åæ”¹ä¸ºäº†<code class="language-plaintext highlighter-rouge">final byte[] value</code> åŠ ä¸Šç¼–ç æ ‡è®°<code class="language-plaintext highlighter-rouge">coder</code>ï¼ŒèŠ‚çº¦ç©ºé—´ï¼ˆå…³äºjdk9å­˜å‚¨ç»“æœå˜æ›´çš„è¯´æ˜ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£é‡ŒMotivationå·²ç»æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œè¯¦æƒ…å¯è§http://openjdk.java.net/jeps/254ï¼‰</li>
</ul>

<h4 id="string-pool">String Pool</h4>

<p>String Pool å³å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œåœ¨String Poolä¸­å­˜å‚¨çš„å­—ç¬¦ä¸²æ˜¯ç›¸å¼‚çš„ï¼Œjavaè¯­è¨€è§„èŒƒè¦æ±‚ï¼Œå®Œå…¨ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œåº”è¯¥sæ˜¯åŒæ ·çš„Unicodeï¼Œå¿…é¡»æ˜¯æŒ‡å‘åŒä¸€ä¸ªStringå®ä¾‹çš„ï¼Œå…³äºString Poolç®€å•çš„è¯´æ˜ä¸‹ï¼š</p>

<ul>
  <li>String Poolæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„Hashtableï¼Œåœ¨jdk7ä¹‹å‰é»˜è®¤å¤§å°ä¸º1009ï¼Œjdk7åŠä¹‹åé»˜è®¤å¤§å°ä¸º60013</li>
  <li>å¦‚æœæ”¾è¿›String Poolçš„Stringç‰¹åˆ«å¤šï¼Œå°±å¾ˆå®¹æ˜“é€ æˆhashå†²çªï¼Œä»è€Œå¯¼è‡´é“¾è¡¨å¾ˆé•¿ï¼Œæ­¤æ—¶String.intern()çš„æ€§èƒ½ä¼šå¤§å¤§ä¸‹é™</li>
  <li>å¯ä»¥ä½¿ç”¨-XX:StringTableSizeè®¾ç½®String Poolçš„å¤§å°ï¼Œä¸è¿‡ä»jdk8å¼€å§‹ï¼ŒStringTableSizeæœ€å°åªèƒ½ä¸º1009äº†ï¼Œå°äºè¿™ä¸ªå°±ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚è®¾ç½®ä¸º200åˆ™ä¼šæŠ¥<code class="language-plaintext highlighter-rouge">uintx StringTableSize=200 is outside the allowed range [ 1009 ... 6661443 ]</code></li>
</ul>

<h3 id="2-stringçš„å†…å­˜åˆ†é…">2. Stringçš„å†…å­˜åˆ†é…</h3>

<p>åœ¨javaä¸­æœ‰8ç§åŸºæœ¬æ•°æ®ç±»å‹å’Œä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„ç±»å‹Stringï¼Œä¸ºäº†ä½¿ä»–ä»¬åœ¨è¿è¡Œä¸­é€Ÿåº¦æ›´å¿«æ›´èŠ‚çœå†…å­˜ï¼Œéƒ½æä¾›äº†å¸¸é‡æ± çš„æ¦‚å¿µï¼Œå¸¸é‡æ± å°±ç›¸å½“äºjavaç³»ç»Ÿçº§æä¾›çš„ç¼“å­˜ï¼Œ8ä¸­åŸºæœ¬æ•°æ®ç±»å‹çš„å¸¸é‡æ± éƒ½æ˜¯ç³»ç»Ÿåè°ƒçš„ï¼Œä½†æ˜¯Stringçš„æ¯”è¾ƒç‰¹æ®Šï¼Œä»–æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>

<ul>
  <li>ä½¿ç”¨â€â€œå£°æ˜å‡ºæ¥çš„Stringå¯¹è±¡ä¼šç›´æ¥å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ï¼Œeg: String s = â€œhello worldâ€</li>
  <li>ä¸æ˜¯â€â€œå£°æ˜çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨String.intern()å°†å…¶æ”¾å…¥å¸¸é‡æ± ä¸­</li>
</ul>

<p>å¯¹äºå¸¸é‡æ± ï¼Œè¿™é‡Œç®€å•è¯´æ˜ä¸‹ï¼Œåœ¨jdk6åŠä¹‹å‰ï¼Œæ˜¯æ”¾åœ¨æ°¸ä¹…ä»£çš„ï¼Œä½†æ˜¯PermSizeæ¯”è¾ƒå°ï¼Œè™½ç„¶å¯ä»¥è°ƒæ•´ï¼Œä½†æ˜¯æ°¸ä¹…ä»£åƒåœ¾å›æ”¶é¢‘ç‡æ¯”è¾ƒä½ï¼Œåœ¨jdk7å¼€å§‹å»æ°¸ä¹…ä»£ï¼Œå°†å¸¸é‡æ± è°ƒæ•´åˆ°äº†å †ä¸­ï¼Œå¯¹String.intern()ä¹Ÿåšäº†ä¿®æ”¹ï¼Œæ–‡ç« åç»­ä¼šè¯´æ˜ä¸¤ä¸ªç‰ˆæœ¬ä¸åŒä¹‹å¤„ã€‚</p>

<h3 id="3-stringçš„åŸºæœ¬æ“ä½œ">3. Stringçš„åŸºæœ¬æ“ä½œ</h3>

<h4 id="stringçš„æ‹¼æ¥">Stringçš„æ‹¼æ¥</h4>

<p><strong>Example1</strong>ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"a"</span> <span class="o">+</span> <span class="s">"b"</span> <span class="o">+</span> <span class="s">"c"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"abc"</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="o">);</span>  <span class="c1">//true</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s2</span><span class="o">));</span>  <span class="c1">//true</span>
</code></pre></div></div>

<p>ç”¨javapåç¼–è¯‘å¯ä»¥æŸ¥çœ‹ä»¥ä¸Šç‰‡æ®µå¯¹åº”çš„å­—èŠ‚ç ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0: ldc           <span class="c">#3                  // String abc</span>
2: astore_0
3: ldc           <span class="c">#3                  // String abc</span>
5: astore_1
...
</code></pre></div></div>

<p>ä»å­—èŠ‚ç å¯ä»¥çœ‹å‡ºâ€aâ€+â€bâ€+â€câ€æ˜¯ç­‰ä»·äºâ€abcâ€çš„</p>

<blockquote>
  <p>å¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœæ˜¯åœ¨å¸¸é‡æ± ä¸­çš„ï¼Œè¿™ä¸ªæ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–</p>

</blockquote>

<p><strong>Example2</strong>ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"a"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"b"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s3</span> <span class="o">=</span> <span class="s">"ab"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s4</span> <span class="o">=</span> <span class="s">"ab"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s5</span> <span class="o">=</span> <span class="n">s1</span> <span class="o">+</span> <span class="s">"b"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s6</span> <span class="o">=</span> <span class="s">"a"</span> <span class="o">+</span> <span class="n">s2</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s7</span> <span class="o">=</span> <span class="n">s1</span> <span class="o">+</span> <span class="n">s2</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s8</span> <span class="o">=</span> <span class="n">s7</span><span class="o">.</span><span class="na">intern</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s3</span> <span class="o">==</span> <span class="n">s4</span><span class="o">);</span> <span class="c1">//true</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s3</span> <span class="o">==</span> <span class="n">s5</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s3</span> <span class="o">==</span> <span class="n">s6</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s3</span> <span class="o">==</span> <span class="n">s7</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s5</span> <span class="o">==</span> <span class="n">s6</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s5</span> <span class="o">==</span> <span class="n">s7</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s6</span> <span class="o">==</span> <span class="n">s7</span><span class="o">);</span> <span class="c1">//false</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s3</span> <span class="o">==</span> <span class="n">s8</span><span class="o">);</span> <span class="c1">//false</span>
</code></pre></div></div>

<blockquote>
  <p>ä¸¤ä¸ªå­—ç¬¦ä¸²å¸¸é‡æˆ–è€…å­—é¢é‡ç›¸åŠ ï¼Œéƒ½ä¸ä¼šnewæ–°çš„å­—ç¬¦ä¸²ï¼Œä¸¤ä¸ªä¸­åªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯å˜é‡ï¼Œéƒ½ä¼šnewæ–°çš„å­—ç¬¦ä¸²ï¼Œæ–°çš„å­—ç¬¦ä¸²éƒ½æ˜¯åœ¨å †ä¸­çš„ï¼Œå¯ä»¥çœ‹ä¸‹å­—èŠ‚ç æ–‡ä»¶ï¼Œjdk8ä¸­å˜é‡æ‹¼æ¥çš„åŸç†æ˜¯StringBuilderï¼Œjdk9ä½¿ç”¨äº†StringConcatFactory.makeConcatWithConstants</p>

</blockquote>

<h4 id="internçš„ä½¿ç”¨">intern()çš„ä½¿ç”¨</h4>

<p>intern()æ˜¯nativeè°ƒç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­é€šè¿‡equalsæ–¹æ³•åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨è¦æ”¾å…¥çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰åˆ™åœ¨å¸¸é‡æ± ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´å­˜æ”¾è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å¹¶è¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›Stringå¯¹è±¡çš„å¼•ç”¨ï¼Œåœ¨ä¸åŒjdkç‰ˆæœ¬ä¸­å­˜å…¥å¸¸é‡æ± çš„æ–¹å¼æœ‰æ‰€ä¸åŒï¼š</p>

<p>jdk6ä¸­ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥æ± ä¸­</p>

<ul>
  <li>å¦‚æœå¸¸é‡æ± ä¸­å·²ç»æœ‰äº†ï¼Œåˆ™ä¸ä¼šæ”¾å…¥ï¼Œç›´æ¥è¿”å›å¸¸é‡æ± ä¸­å·²æœ‰çš„å¯¹è±¡çš„åœ°å€</li>
  <li>å¦‚æœæ²¡æœ‰ï¼Œä¼šæŠŠå¯¹è±¡å¤åˆ¶ä¸€ä»½æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œè¿”å›å¸¸é‡æ± ä¸­çš„å¯¹è±¡åœ°å€</li>
</ul>

<p>jdk7ä¸­ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥æ± ä¸­</p>

<ul>
  <li>å¦‚æœå¸¸é‡æ± ä¸­å·²ç»æœ‰äº†ï¼Œåˆ™ä¸ä¼šæ”¾å…¥ï¼Œç›´æ¥è¿”å›å¸¸é‡æ± ä¸­å·²æœ‰çš„å¯¹è±¡çš„åœ°å€</li>
  <li>å¦‚æœæ²¡æœ‰ï¼Œä¼šæŠŠå¯¹è±¡çš„å¼•ç”¨åœ°å€å¤åˆ¶ä¸€ä»½ï¼Œä¿å­˜åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶è¿”å›æ± ä¸­çš„å¼•ç”¨åœ°å€</li>
</ul>

<p>å…³äºintern()æ“ä½œçš„ä¿®æ”¹ï¼Œå®˜æ–¹è®°å½•è¯·æˆ³https://www.oracle.com/java/technologies/javase/jdk7-relnotes.html#jdk7changes</p>

<p>ä»¥ä¸‹ä»¥ä¸¤æ®µä»£ç æ¼”ç¤ºjdk6åŠåç»­ç‰ˆæœ¬çš„åŒºåˆ«</p>

<p><strong>ä»£ç ä¸€</strong>ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"hello"</span><span class="o">);</span>
<span class="n">s</span><span class="o">.</span><span class="na">intern</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"hello"</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="n">s1</span><span class="o">);</span> <span class="c1">//false</span>
</code></pre></div></div>

<p>å¯¹åº”å­—èŠ‚ç ä¸º(jdk10)ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 0 new <span class="c">#2 &lt;java/lang/String&gt;</span>
 3 dup
 4 ldc <span class="c">#3 &lt;hello&gt;</span>
 6 invokespecial <span class="c">#4 &lt;java/lang/String.&lt;init&gt;&gt;</span>
 9 astore_1
10 aload_1
11 invokevirtual <span class="c">#5 &lt;java/lang/String.intern&gt;</span>
14 pop
15 ldc <span class="c">#3 &lt;hello&gt;</span>
17 astore_2
...
</code></pre></div></div>

<p>ä»å­—èŠ‚ç å¯ä»¥çœ‹å‡ºï¼Œnew String(â€œhelloâ€)ä¼šåœ¨å¸¸é‡æ± ä¸­åˆ›å»ºå­—ç¬¦ä¸²â€helloâ€ï¼ˆldcæŒ‡ä»¤ï¼‰ï¼Œè¿™æ—¶s.intern()çš„æ“ä½œæ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå› ä¸ºå¸¸é‡æ± ä¸­å·²ç»æœ‰äº†â€helloâ€ï¼Œæ‰€ä»¥s2å¯¹åº”çš„å°±æ˜¯å¸¸é‡æ± ä¸­â€helloâ€çš„å¼•ç”¨ï¼Œè€Œsæ˜¯newå‡ºæ¥çš„å¯¹åº”çš„æ˜¯heapä¸­çš„å¼•ç”¨ï¼Œè‡ªç„¶äºs2ä¸ç­‰ï¼Œå¯¹äºjdk6åŠåç»­ç‰ˆæœ¬ç»“æœæ˜¯ä¸€è‡´çš„</p>

<p><strong>ä»£ç äºŒ</strong>ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"a"</span><span class="o">)</span> <span class="o">+</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"b"</span><span class="o">);</span>
<span class="n">s1</span><span class="o">.</span><span class="na">intern</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"ab"</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="o">);</span>
</code></pre></div></div>

<p>å¯¹åº”å­—èŠ‚ç ä¸º(jdk10æ¼”ç¤º)ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 0 new <span class="c">#2 &lt;java/lang/String&gt;</span>
 3 dup
 4 ldc <span class="c">#3 &lt;a&gt;</span>
 6 invokespecial <span class="c">#4 &lt;java/lang/String.&lt;init&gt;&gt;</span>
 9 new <span class="c">#2 &lt;java/lang/String&gt;</span>
12 dup
13 ldc <span class="c">#5 &lt;b&gt;</span>
15 invokespecial <span class="c">#4 &lt;java/lang/String.&lt;init&gt;&gt;</span>
18 invokedynamic <span class="c">#6 &lt;makeConcatWithConstants, BootstrapMethods #0&gt;</span>
23 astore_1
24 aload_1
25 invokevirtual <span class="c">#7 &lt;java/lang/String.intern&gt;</span>
28 pop
29 ldc <span class="c">#8 &lt;ab&gt;</span>
31 astore_2
....
</code></pre></div></div>

<p>ä»å­—èŠ‚ç å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€è¡Œç»“æŸåå¹¶æ²¡æœ‰åœ¨å­—ç¬¦ä¸²ä¸­åˆ›å»ºå­—ç¬¦ä¸²â€abâ€ï¼Œs3æŒ‡å‘çš„åœ°å€æ˜¯new String(â€œabâ€)ï¼Œæ‰€ä»¥å½“è°ƒç”¨s3.intern()æ—¶ä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºâ€abâ€ï¼Œä½†æ˜¯é‡æ–°åˆ›å»ºâ€abâ€çš„è¡Œä¸ºåœ¨ä¸åŒç‰ˆæœ¬è¡¨ç°æ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¿™é‡Œs3==s4ç»“æœä¹Ÿä¸åŒï¼Œjdk6ä¸‹ç»“æœä¸ºfalse(åœ¨å¸¸é‡æ± é‡æ–°å¤åˆ¶äº†ä¸€ä»½ï¼Œæœ‰æ–°çš„åœ°å€)ï¼Œåç»­ç‰ˆæœ¬åˆ™ä¸ºtrue(åœ¨å¸¸é‡æ± ä¿å­˜çš„æ˜¯ä¹‹å‰åœ¨å †ä¸­ç”Ÿæˆçš„å­—ç¬¦ä¸²çš„åœ°å€å¼•ç”¨)ï¼Œ å¯¹jdk6å’Œjdk7ä¸Šç»­ä»£ç è°ƒç”¨intern()åœ¨å¸¸é‡æ± ä¸­æ·»åŠ å­—ç¬¦ä¸²å¯¹è±¡ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>

<p>jdk6:</p>

<p><img align="center" src="https://user-images.githubusercontent.com/66450332/90843011-35c4a980-e393-11ea-9a74-aaf4cbdd1e9b.png" width="500" height="250" alt="/assets/images/java/string-memory-jdk6.png" /></p>

<p>jdk7ï¼š</p>

<p><img align="center" src="https://user-images.githubusercontent.com/66450332/90843013-365d4000-e393-11ea-81d3-98b5239e467f.png" width="500" height="250" alt="/assets/images/java/string-memory-jdk7.png" /></p>

<p>å‚è€ƒèµ„æ–™ï¼š</p>

<p><a href="">æ·±å…¥ç†è§£javaè™šæ‹Ÿæœº</a></p>

<p><a href="https://www.journaldev.com/797/what-is-java-string-pool">https://www.journaldev.com/797/what-is-java-string-pool</a></p>

:ET